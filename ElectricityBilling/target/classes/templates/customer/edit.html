<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="fragments/layout :: html (~{::title}, ~{::body})">

<head>
  <title>Edit Customer</title>
</head>

<body>

  <div class="row mb-4">
    <div class="col">
      <h2 class="fw-bold mb-0">Edit Customer</h2>
      <p class="text-muted mb-0">Update customer information</p>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-8">
      <div class="card-modern">
        <form th:action="@{'/customers/edit/' + ${customer.id}}" th:object="${customer}" method="post">
          <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">

          <div class="mb-3">
            <label class="form-label fw-semibold">Name <span class="text-danger">*</span></label>
            <input class="form-control" th:field="*{name}" required placeholder="Enter customer name">
            <div class="text-danger small mt-1" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></div>
          </div>

          <div class="mb-3">
            <label class="form-label fw-semibold">Meter No <span class="text-danger">*</span></label>
            <input class="form-control" th:field="*{meterNo}" required readonly>
            <small class="text-muted">Meter number cannot be changed</small>
            <div class="text-danger small mt-1" th:if="${#fields.hasErrors('meterNo')}" th:errors="*{meterNo}"></div>
          </div>

          <div class="mb-3">
            <label class="form-label fw-semibold">Email</label>
            <input type="email" class="form-control" th:field="*{email}" placeholder="customer@example.com">
            <div class="text-danger small mt-1" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
          </div>

          <div class="mb-3">
            <label class="form-label fw-semibold">Phone</label>
            <input type="tel" class="form-control" th:field="*{phone}" placeholder="+1 (555) 000-0000">
            <div class="text-danger small mt-1" th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}"></div>
          </div>

          <div class="mb-4">
            <label class="form-label fw-semibold">Address</label>
            <textarea class="form-control" th:field="*{address}" rows="3" placeholder="Enter full address"></textarea>
            <div class="text-danger small mt-1" th:if="${#fields.hasErrors('address')}" th:errors="*{address}"></div>
          </div>

          <div class="d-flex gap-2">
            <button type="submit" class="btn btn-primary-modern">
              <i class="bi bi-check-lg"></i> Save Changes
            </button>
            <a class="btn btn-outline-secondary" href="/customers">
              <i class="bi bi-x-lg"></i> Cancel
            </a>
          </div>
        </form>
      </div>
    </div>

    <div class="col-lg-4">
      <div class="card-modern bg-light">
        <h5 class="fw-bold mb-3"><i class="bi bi-info-circle"></i> Information</h5>
        <ul class="list-unstyled small text-muted mb-0">
          <li class="mb-2"><i class="bi bi-lock text-warning"></i> Meter number is read-only</li>
          <li class="mb-2"><i class="bi bi-check-circle text-success"></i> Email must be unique</li>
          <li class="mb-2"><i class="bi bi-check-circle text-success"></i> Phone must be unique</li>
          <li><i class="bi bi-exclamation-triangle text-warning"></i> Changes are saved immediately</li>
        </ul>
      </div>
    </div>
  </div>

</body>

</html>